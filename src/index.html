<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="joystick-viewer.css" />
  <link rel="stylesheet" href="template-editor.css" />
  <link rel="stylesheet" href="input-debugger.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Star Citizen Bindnig Utility</title>
  <script>
    // Restore font size immediately before page renders to avoid flash
    (function ()
    {
      const FONT_SIZE_DEFAULT = 14;
      const savedFontSize = localStorage.getItem('appFontSize');
      if (savedFontSize)
      {
        document.documentElement.style.fontSize = savedFontSize + 'px';
      } else
      {
        document.documentElement.style.fontSize = FONT_SIZE_DEFAULT + 'px';
      }
    })();
  </script>
  <script type="module" src="/button-renderer.js" defer></script>
  <script type="module" src="/main.js" defer></script>
  <script type="module" src="/joystick-viewer.js" defer></script>
  <script type="module" src="/template-editor.js" defer></script>
  <script type="module" src="/input-debugger.js" defer></script>
</head>

<body>
  <div class="app-container">
    <!-- Main App Header (Persistent) -->
    <header class="app-header">
      <!-- Header Row 1 -->
      <div class="header-row-1">
        <div class="header-logo">
          <h1>Star Citizen Binding Utility <span id="app-version">v0.7.1</span></h1>
          <div id="update-info" class="header-update-info"></div>
        </div>
        <div class="header-actions">
          <button id="sc-directory-btn" class="btn btn-primary" title="Configure Star Citizen installation directory">‚öôÔ∏è
            Auto Save Settings</button>
          <button id="load-btn" class="btn btn-primary">Load</button>
          <button id="save-as-btn" class="btn btn-primary" disabled>Save As...</button>
          <button id="save-btn" class="btn btn-success" disabled>üíæ Save Keybindings</button>
          <button id="copy-command-btn" class="btn btn-primary" title="Copy rebind command to clipboard"
            style="display: none;">üìã</button>
        </div>
        <div class="header-file-info">
          <div id="loaded-file-indicator" class="loaded-file-indicator" style="display: none;">
            <span class="file-icon">üìÑ</span>
            <span id="loaded-file-name">layout_NewBindings_exported.xml</span>
          </div>
        </div>
      </div>

      <!-- Header Row 2 -->
      <div class="header-row-2">
        <div class="header-tabs">
          <button id="tab-welcome" class="tab-btn active" data-tab="welcome">üëã Welcome</button>
          <button id="tab-main" class="tab-btn" data-tab="main">Keybindings</button>
          <button id="tab-visual" class="tab-btn" data-tab="visual">Visual View</button>
          <button id="tab-template" class="tab-btn" data-tab="template">Template Editor</button>
          <button id="tab-debugger" class="tab-btn" data-tab="debugger">Input Debugger</button>
          <button id="tab-help" class="tab-btn" data-tab="help">‚ùì Help</button>
          <button id="tab-settings" class="tab-btn tab-settings-btn" data-tab="settings"
            title="Settings & Debug">‚öôÔ∏è</button>
          <button id="kofi-header-btn" class="tab-btn tab-kofi-btn" type="button" title="Support on Ko-fi">
            <img src="./assets/kofi_symbol.png" alt="Ko-fi" class="kofi-header-icon">
          </button>
        </div>
        <div class="header-template-info">
          <span>Template:</span>
          <span id="header-template-name">Untitled Template</span>
        </div>
      </div>
    </header>

    <!-- Main Content - Tab Container -->
    <div class="tab-content-container">
      <!-- TAB 0: Welcome Page -->
      <div id="tab-content-welcome" class="tab-content active">
        <div class="welcome-page-container">
          <div class="welcome-hero">
            <h1>üëã Welcome to Star Citizen Binding Utility!</h1>
            <p class="welcome-subtitle">Your ultimate companion for managing Star Citizen keybindings outside the game
            </p>
          </div>

          <div class="welcome-section">
            <h2>üéÆ What is this utility?</h2>
            <p>The Star Citizen Binding Utility is a powerful desktop application that lets you view, edit, and manage
              your Star Citizen joystick, keyboard, and mouse keybindings with ease. No more fumbling through in-game
              menus or editing XML files by hand!</p>
          </div>

          <div class="welcome-section">
            <h2>‚ú® Key Features</h2>
            <div class="feature-grid">
              <div class="feature-card">
                <div class="feature-icon">‚å®Ô∏è</div>
                <h3>Full Keybinding Editor</h3>
                <p>Edit all your controls in one place with an intuitive interface</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">üïπÔ∏è</div>
                <h3>Visual Joystick View</h3>
                <p>See your bindings mapped to a visual representation of your joystick</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">üé®</div>
                <h3>Template Editor</h3>
                <p>Create custom joystick templates for your specific hardware</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">üîó</div>
                <h3>Auto Exporting</h3>
                <p>Automatically export your keybindings to the game directory (including all installations)</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">üß©</div>
                <h3>Updates</h3>
                <p>Automatically checks for updates, and notifies you when a new version is available</p>
              </div>
              <div class="feature-card">
                <div class="feature-icon">üîç</div>
                <h3>Input Debugger</h3>
                <p>Test and debug your input devices in real-time</p>
              </div>
            </div>
          </div>

          <div class="welcome-section">
            <h2>üöÄ Getting Started</h2>
            <ol class="welcome-steps">
              <li><strong>Configure Your Devices:</strong> Click the "‚öôÔ∏è Set Joystick Remapping" button in the
                Keybindings
                tab to remap your physical devices (optional)</li>
              <li><strong>Load Your Bindings:</strong> Click "Load" to import your existing Star Citizen keybindings
                file</li>
              <li><strong>Edit & Save:</strong> Make changes and save them back to your game directory</li>
              <li><strong>Explore Visual View:</strong> Select a template to see your bindings visualized on your
                joystick</li>
            </ol>
          </div>

          <div class="welcome-section support-section">
            <h2>‚ù§Ô∏è Support This Project</h2>
            <p>If you find this utility helpful, consider supporting its development:</p>
            <div class="kofi-container">
              <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script>
              <script
                type='text/javascript'>kofiwidget2.init('Support me on Ko-fi', '#f25050', 'C0C51OF2NM'); kofiwidget2.draw();</script>
            </div>
            <p class="support-note">Your support helps keep this project free and open-source! üôè</p>
          </div>
        </div>
      </div>

      <!-- TAB 1: Main Keybindings Page -->
      <div id="tab-content-main" class="tab-content">
        <div class="main-content">
          <!-- Sidebar - Categories and Filters -->
          <aside class="sidebar">
            <div class="filter-section">
              <h3>Actions</h3>
              <button id="new-keybinding-btn" class="btn btn-primary" style="width: 100%; margin-bottom: 0.75rem;">üìù
                New Keybinding</button>
              <button id="configure-joystick-mapping-btn" class="btn btn-secondary"
                style="width: 100%; margin-bottom: 0.75rem;">‚öôÔ∏è Set Joystick
                Remapping</button>
              <button id="clear-sc-binds-btn" class="btn btn-danger" style="width: 100%;">üóëÔ∏è Clear SC Binds</button>
            </div>

            <div class=" filter-section">
              <h3>Filters</h3>
              <div class="category-list">
                <button class="category-item  category-item-indented active" data-filter="all">All</button>
                <button class="category-item  category-item-indented" data-filter="keyboard">Keyboard</button>
                <button class="category-item  category-item-indented" data-filter="mouse">Mouse</button>
                <button class="category-item  category-item-indented" data-filter="joystick">Joystick</button>
                <button class="category-item  category-item-indented" data-filter="gamepad">Gamepad</button>
                <div class="checkbox-container">
                  <input type="checkbox" id="customized-only-checkbox" />
                  <label for="customized-only-checkbox">Customized Only</label>
                </div>
                <div class="checkbox-container">
                  <input type="checkbox" id="show-defaults-checkbox" checked />
                  <label for="show-defaults-checkbox">Show Default Bindings</label>
                </div>
              </div>
            </div>

            <div class="category-section">
              <h3>Categories</h3>
              <div id="category-list" class="category-list">
                <!-- Categories will be populated here -->
              </div>
            </div>

            <div class="device-info">
              <h3>Devices</h3>
              <div id="device-list">
                <!-- Device info will be populated here -->
              </div>
            </div>
          </aside>

          <!-- Main Panel - Keybindings Display -->
          <main class="bindings-panel">
            <div id="welcome-screen" class="welcome-screen">
              <div class="welcome-content">
                <h2>Welcome to Star Citizen Binding Utility</h2>
                <p>Load a Star Citizen keybinding file to view and manage your controls</p>
                <button id="welcome-load-btn" class="btn btn-large btn-primary">Load Keybindings File</button>
              </div>
            </div>

            <div id="bindings-content" class="bindings-content" style="display: none;">
              <div class="bindings-header">
                <h2 id="profile-name">Profile Name</h2>
                <div class="search-container">
                  <input type="text" id="search-input" placeholder="Search actions..." class="search-input" />
                  <button id="search-clear-btn" class="search-clear-btn" title="Clear search"
                    style="display: none;">‚úï</button>
                </div>
              </div>

              <div id="action-maps-container" class="action-maps-container">
                <!-- Action maps and bindings will be populated here -->
              </div>
            </div>
          </main>
        </div>
      </div>

      <!-- TAB 2: Visual View Page -->
      <div id="tab-content-visual" class="tab-content">
        <div class="viewer-content">
          <!-- Joystick Display -->
          <div class="joystick-display">
            <!-- Quick Tips -->
            <div class="quick-tips" style="top:3rem;right:3rem;">Middle or Right click to pan view<br>Scroll wheel to
              zoom<br>Press <kbd>Tab</kbd> to switch pages<br>Click on button boxes to show all actions<br>Grey actions
              are default SC bind actions</div>

            <div id="welcome-screen-visual" class="welcome-screen">
              <div class="welcome-content">
                <h2>Select a joystick template to view your bindings</h2>
                <p>Make sure you have keybindings loaded first</p>
                <button id="welcome-select-btn" class="btn btn-large btn-primary">Select Template</button>
              </div>
            </div>

            <div id="viewer-canvas-container" class="canvas-container" style="display: none;">
              <canvas id="viewer-canvas"></canvas>
            </div>

            <!-- Floating Control Toolbar -->
            <div id="viewer-controls" class="viewer-controls" style="display: none;">
              <!-- Stick Selector -->
              <div class="control-group stick-selector" id="viewer-stick-selector" style="display: none;">
                <button id="viewer-left-stick-btn" class="control-btn" title="View Left Stick">
                  <span class="control-icon">üïπÔ∏è</span>
                  <span>Left</span>
                </button>
                <button id="viewer-right-stick-btn" class="control-btn active" title="View Right Stick">
                  <span class="control-icon">üïπÔ∏è</span>
                  <span>Right</span>
                </button>
              </div>

              <div class="control-divider"></div>

              <!-- Filter Controls -->
              <div class="control-group">
                <button id="hide-defaults-toggle" class="control-btn" title="Hide Default Bindings">
                  <span class="control-icon">üëÅÔ∏è</span>
                  <span>Show All</span>
                </button>
              </div>

              <div class="control-divider"></div>

              <!-- Template & Export -->
              <div class="control-group">
                <button id="select-template-btn" class="control-btn" title="Select Template">
                  <span class="control-icon">üìã</span>
                  <span>Open</span>
                </button>
                <button id="export-image-btn" class="control-btn" title="Export as Image">
                  <span class="control-icon">üíæ</span>
                  <span>Export</span>
                </button>
              </div>
            </div>

            <!-- Modifier Filter Toolbar -->
            <div id="modifier-toolbar" class="modifier-toolbar" style="display: none;">
              <span class="toolbar-label">Filter by:</span>
              <div class="modifier-options">
                <label class="modifier-radio">
                  <input type="radio" name="modifier-filter" value="all" checked />
                  <span>All</span>
                </label>
                <label class="modifier-radio">
                  <input type="radio" name="modifier-filter" value="lalt" />
                  <span>L Alt</span>
                </label>
                <label class="modifier-radio">
                  <input type="radio" name="modifier-filter" value="lctrl" />
                  <span>L Ctrl</span>
                </label>
                <label class="modifier-radio">
                  <input type="radio" name="modifier-filter" value="lshift" />
                  <span>L Shift</span>
                </label>
                <label class="modifier-radio">
                  <input type="radio" name="modifier-filter" value="rshift" />
                  <span>R Shift</span>
                </label>
                <label class="modifier-radio">
                  <input type="radio" name="modifier-filter" value="rctrl" />
                  <span>R Ctrl</span>
                </label>
                <label class="modifier-radio">
                  <input type="radio" name="modifier-filter" value="ralt" />
                  <span>R Alt</span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- TAB 3: Template Editor Page -->
      <div id="tab-content-template" class="tab-content">
        <div class="editor-content">
          <!-- Left Sidebar - Controls -->
          <aside class="editor-sidebar">
            <div class="section">
              <h3>Template Info</h3>
              <label>
                Template Name:
                <input type="text" id="template-name" placeholder="e.g., T16000M Left" />
              </label>
              <label>
                Joystick Model:
                <input type="text" id="joystick-model" placeholder="e.g., Thrustmaster T16000M" />
              </label>
            </div>

            <div class="section">
              <h3>Template Pages</h3>
              <div id="template-pages-empty" class="empty-state-small">
                No pages yet. Add a page for each physical stick, throttle, or pedal you want to document.
              </div>
              <div id="template-pages-list" class="template-pages-list"></div>
              <button id="add-template-page-btn" class="btn btn-secondary btn-block">+ Add Page</button>
            </div>

            <div class="section">
              <h3>Button List</h3>
              <div class="button-list" id="button-list">
                <div class="empty-state-small">No buttons added yet</div>
              </div>
            </div>

            <div class="section">
              <h3>Instructions</h3>
              <div class="instructions">
                <p><strong>Adding a button:</strong></p>
                <ol>
                  <li>Click "+ Add" in the toolbar over the canvas</li>
                  <li>Click on the joystick image where the button is</li>
                  <li>Click where you want the label box to appear</li>
                  <li>Enter the button name/number</li>
                </ol>
                <p><strong>Editing:</strong></p>
                <ul>
                  <li>Click a button in the list to select it</li>
                  <li>Double-click a button to edit its name/ID</li>
                  <li>Use the üóëÔ∏è button in the toolbar to delete selected</li>
                  <li>Drag the handles on the canvas to reposition</li>
                </ul>
              </div>
            </div>

            <div class="section" style="display:flex; flex-direction:column; gap:6px;">
              <h3>Advanced</h3>
              <button id="clear-all-btn" class="btn btn-danger btn-block">Clear All Buttons</button>
              <button id="mirror-template-btn" class="btn btn-secondary btn-block">üîÑ Mirror Template</button>
              <button id="change-joystick-number-btn" class="btn btn-secondary btn-block">üî¢ Change All JS
                Numbers</button>
            </div>
          </aside>

          <!-- Main Panel - Canvas Editor -->
          <main class="editor-panel">
            <div class="canvas-container" id="canvas-container">
              <!-- Quick Tips -->
              <div class="quick-tips">Middle or Right click to pan view<br>Scroll wheel to zoom<br>Press <kbd>F</kbd> to
                fit
                view<br>Press <kbd>Tab</kbd> to switch pages<br>Double click buttons to
                edit<br>Left click + drag buttons to move
              </div>

              <!-- Floating Template Controls Panel -->
              <div class="template-controls-panel">
                <div class="control-group">
                  <div class="page-selector" id="toolbar-page-buttons">
                    <span style="font-size: 11px; color: #aaa; margin-right: 8px;">Page:</span>
                  </div>
                </div>
                <div class="control-divider"></div>
                <div class="control-group">
                  <button id="new-template-btn" class="control-btn" title="Create new template">‚ú® New</button>
                  <button id="load-template-btn" class="control-btn" title="Load existing template">üìÇ Load</button>
                </div>
                <div class="control-divider"></div>
                <div class="control-group">
                  <button id="save-template-btn" class="control-btn btn-success" title="Save current template">üíæ
                    Save</button>
                  <button id="save-template-as-btn" class="control-btn btn-primary"
                    title="Save template with a new name">üíæ
                    Save As</button>
                </div>
              </div>
              <canvas id="editor-canvas"></canvas>
            </div>

            <div class="edit-controls">
              <button id="add-button-btn" class="btn btn-primary" title="Add Button">+ Add</button>
              <button id="delete-button-btn" class="btn btn-danger" disabled title="Delete Selected">üóëÔ∏è</button>
            </div>

            <div class="zoom-controls">
              <button id="zoom-out-btn" class="btn-icon">‚àí</button>
              <span id="zoom-level">100%</span>
              <button id="zoom-in-btn" class="btn-icon">+</button>
              <button id="zoom-fit-btn" class="btn btn-secondary btn-sm">Fit</button>
              <button id="zoom-reset-btn" class="btn btn-secondary btn-sm">100%</button>
            </div>
          </main>
        </div>
      </div>

      <!-- TAB 4: Input Debugger Page -->
      <div id="tab-content-debugger" class="tab-content">
        <div class="tab-subheader">
          <h2>Input Debugger</h2>
        </div>

        <div class="container">
          <main>
            <div class="debugger-controls">
              <button id="start-debug-btn" class="btn btn-primary">‚ñ∂ Start Detecting</button>
              <button id="stop-debug-btn" class="btn btn-secondary" disabled>‚è∏ Stop Detecting</button>
              <button id="clear-debug-btn" class="btn btn-secondary">üóëÔ∏è Clear Log</button>
              <button id="show-devices-btn" class="btn btn-secondary">üéÆ Show Devices</button>
              <span id="debug-status" class="status-indicator">Ready</span>
            </div>

            <div class="timeline-container">
              <div class="timeline-header">
                <h2>Input Timeline</h2>
                <div class="timeline-info">
                  <span id="event-count">0 events</span>
                  <label>
                    <input type="checkbox" id="auto-scroll-checkbox" checked>
                    Auto-scroll
                  </label>
                </div>
              </div>
              <div id="timeline" class="timeline">
                <div class="timeline-empty">
                  Press "Start Detecting" and then press any button or move any axis on your joystick...
                </div>
              </div>
            </div>

            <div class="stats-container">
              <h3>Statistics</h3>
              <div class="stats-grid">
                <div class="stat-card">
                  <div class="stat-label">Total Events</div>
                  <div class="stat-value" id="stat-total">0</div>
                </div>
                <div class="stat-card">
                  <div class="stat-label">Unique Buttons</div>
                  <div class="stat-value" id="stat-buttons">0</div>
                </div>
                <div class="stat-card">
                  <div class="stat-label">Unique Axes</div>
                  <div class="stat-value" id="stat-axes">0</div>
                </div>
                <div class="stat-card">
                  <div class="stat-label">Hat Switches</div>
                  <div class="stat-value" id="stat-hats">0</div>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>

      <!-- TAB 5: Help Page -->
      <div id="tab-content-help" class="tab-content">
        <div class="tab-subheader">
          <h2>‚ùì Help & Tips</h2>
        </div>

        <div class="help-page-container">
          <div class="help-section">
            <h3>‚å®Ô∏è Keyboard Shortcuts</h3>
            <p>The app supports the following keyboard shortcuts for quick navigation and adjustments:</p>
            <table class="shortcuts-table" style="width: 100%; border-collapse: collapse;">
              <tr style="border-bottom: 1px solid var(--bg-light);">
                <th style="text-align: left; padding: 0.5rem; font-weight: 600;">Shortcut</th>
                <th style="text-align: left; padding: 0.5rem; font-weight: 600;">Action</th>
              </tr>
              <tr style="border-bottom: 1px solid var(--bg-light);">
                <td style="padding: 0.5rem; font-family: 'Courier New', monospace; background: var(--bg-medium);">Ctrl +
                  Plus (+)</td>
                <td style="padding: 0.5rem;">Increase font size</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--bg-light);">
                <td style="padding: 0.5rem; font-family: 'Courier New', monospace; background: var(--bg-medium);">Ctrl +
                  Minus (‚àí)</td>
                <td style="padding: 0.5rem;">Decrease font size</td>
              </tr>
              <tr style="border-bottom: 1px solid var(--bg-light);">
                <td style="padding: 0.5rem; font-family: 'Courier New', monospace; background: var(--bg-medium);">Ctrl +
                  0</td>
                <td style="padding: 0.5rem;">Reset font size to default</td>
              </tr>
            </table>
            <p class="help-note" style="margin-top: 1rem;"><strong>üí° Tip:</strong> These shortcuts work on Mac too!
              Just use Cmd instead of Ctrl. The font size preference is saved automatically.</p>
          </div>

          <div class="help-section">
            <h3>üéÆ Understanding JS1 and JS2</h3>
            <p>Star Citizen uses "js1", "js2", "js3", etc. to identify different joystick/gamepad devices. This
              numbering
              system is crucial for proper binding management.</p>
            <ul>
              <li><strong>js1</strong> = First joystick device</li>
              <li><strong>js2</strong> = Second joystick device</li>
              <li><strong>gp1</strong> = First gamepad device (Xbox controllers, etc.)</li>
            </ul>
            <p class="help-note"><strong>Important:</strong> Windows may enumerate devices differently each time you
              plug
              them in or restart your PC. This is why device mapping is critical!</p>
          </div>

          <div class="help-section">
            <h3>üìù Template Editor Tips</h3>
            <p>When creating a joystick template:</p>
            <ol>
              <li><strong>Configure Device for Each Page:</strong> Open the page editor and select which device this
                page's buttons are for.</li>
              <li>This tells the template which physical device corresponds to this page's buttons.</li>
              <li>Without this device assignment, the template won't know which device you're configuring buttons for.
              </li>
              <li>You can test device detection by clicking "Test" next to the device dropdown to confirm you're
                pressing buttons on the correct device.</li>
              <li><strong>Navigate Pages Quickly:</strong> Press <kbd>Tab</kbd> to move forward through pages, or
                <kbd>Shift+Tab</kbd> to move backward. Pages loop around.
              </li>
            </ol>
            <p class="help-note"><strong>Tip:</strong> If you have a dual stick setup (e.g., VKB Gladiator), typically
              assign one page per device to keep your layout organized!</p>
          </div>

          <div class="help-section">
            <h3>üéØ Keybindings Page Tips</h3>
            <p>Before editing keybindings:</p>
            <ol>
              <li><strong>Set Joystick Mapping!</strong> Click "Configure Joystick Mapping" at the top of the page.</li>
              <li>This assigns device IDs (js1, js2, etc.) to your physical devices.</li>
              <li>When you press a button on a device, the app will know which js number to use based on this mapping.
              </li>
              <li>Use the "Test" button to confirm which physical device corresponds to each js number.</li>
              <li>Save the mapping - it persists between sessions so you don't have to reconfigure every time!</li>
            </ol>
            <p class="help-note"><strong>Why is this important?</strong> If you don't map devices first, bindings may be
              assigned to the wrong js number, causing controls to not work correctly in Star Citizen.</p>
          </div>

          <div class="help-section">
            <h3>üîÑ Common Workflows</h3>
            <h4>Creating a New Template:</h4>
            <ol>
              <li>Go to Template Editor tab</li>
              <li>Click "Configure Joystick Mapping"</li>
              <li>Assign your left and right sticks</li>
              <li>Load an image of your joystick</li>
              <li>Add buttons by clicking their positions</li>
              <li>Save your template</li>
            </ol>

            <h4>Editing Keybindings:</h4>
            <ol>
              <li>Click "Configure Joystick Mapping" (first time only)</li>
              <li>Load your keybindings XML file (or it auto-loads)</li>
              <li>Select a template in Visual View (optional but helpful)</li>
              <li>Find the action you want to bind</li>
              <li>Click "Detect Input" and press the button</li>
              <li>Save your changes</li>
            </ol>
          </div>

          <div class="help-section">
            <h3>üìã Applying Changes In-Game with Copy Command</h3>
            <p>Once you've made changes to your keybindings, you can apply them directly in Star Citizen without
              restarting the game:</p>
            <ol>
              <li><strong>Save your keybindings file</strong> using the "Save Keybindings" button (Ctrl+S)</li>
              <li>A <strong>"üìã Copy Command"</strong> button will appear in the top toolbar (it's only visible when you
                have a keybindings file loaded)</li>
              <li>Click the "üìã Copy Command" button to copy the console command to your clipboard</li>
              <li>In Star Citizen, open the console by pressing <code>~</code> (tilde)</li>
              <li>Paste the command (Ctrl+V) and press Enter</li>
              <li>Your keybindings will be reloaded immediately in-game!</li>
            </ol>
            <p class="help-note"><strong>Example command:</strong> <code>pp_RebindKeys layout_exported.xml</code></p>

            <h4 style="margin-top: 1.5rem;">‚ö° Speed Up with Auto-Save</h4>
            <p>If you have multiple Star Citizen installations, the <strong>Auto Save to All Installations</strong>
              feature (accessible via "‚öôÔ∏è Auto Save Settings") can dramatically speed up your workflow:</p>
            <ul>
              <li>When enabled, your keybindings are automatically saved to all detected Star Citizen installations</li>
              <li>This means you only need to enter the console command once, and all your installations will use the
                updated keybindings</li>
              <li>Perfect for maintaining consistent controls across multiple game clients or testing on different
                patches</li>
            </ul>
            <p class="help-note"><strong>Tip:</strong> Configure your Star Citizen directory via the "‚öôÔ∏è Auto Save
              Settings" button to enable this feature.</p>
          </div>

          <div class="help-section">
            <h3>‚ùì Troubleshooting</h3>
            <ul>
              <li><strong>Buttons not working in-game?</strong> Check your joystick mapping. The js numbers in your
                bindings file must match how Star Citizen sees your devices.</li>
              <li><strong>Bindings not working in-game?</strong> Make sure there isn't a similar binding with different
                wording already set. Star Citizen includes many legacy actions that may no longer function‚Äîcheck for
                duplicate bindings with slightly different names.</li>
              <li><strong>Button still active after unbinding?</strong> If you bind a button to an action and then
                unbind it,
                the button may still be bound in-game. You can either manually unbind that specific button in the game's
                control
                settings, or clear all bindings for that device: Advanced Control Customization ‚Üí Control Profiles ‚Üí
                Clear All
                Device Bindings.</li>
              <li><strong>Wrong device responding?</strong> Reconfigure joystick mapping and make sure to test each
                device.</li>
              <li><strong>Lost your mapping?</strong> The app stores device mapping in localStorage, but you can always
                reconfigure it.</li>
              <li><strong>Template buttons look wrong?</strong> Use the mirror template feature or adjust image flip
                settings.</li>
            </ul>
          </div>

          <div class="help-section">
            <h3>üêõ Report Issues</h3>
            <p>If you encounter any bugs or issues, please report them on GitHub:</p>
            <p>
              <a href="https://github.com/BoxximusPrime/SC-Binding-Utility/issues" target="_blank"
                rel="noopener noreferrer" class="external-link">
                https://github.com/BoxximusPrime/SC-Binding-Utility/issues
              </a>
            </p>
            <p class="help-note"><strong>When reporting issues:</strong> Include details about your joystick
              model, what you were doing when the issue occurred, and any error messages you see. Listing the steps you
              took to reproduce the issue is also very helpful.</p>
          </div>
        </div>
      </div>

      <!-- TAB 6: Settings Page -->
      <div id="tab-content-settings" class="tab-content">
        <div class="tab-subheader">
          <h2>‚öôÔ∏è Settings & Debug</h2>
        </div>

        <div class="settings-page-container">
          <div class="settings-section">
            <h3>üîÑ Update Check</h3>
            <p>The application automatically checks for updates every 4 hours. You can manually check for updates now.
            </p>
            <button id="manual-update-check-btn" class="btn btn-primary">üîç Check for Updates</button>
            <div id="update-check-status" class="info-text" style="margin-top: 1rem; display: none;"></div>
          </div>

          <div class="settings-section">
            <h3>üîß Application Cache</h3>
            <p>The application stores data locally to improve performance and remember your preferences. If you're
              experiencing unexpected issues, you can reset the application cache.</p>
            <div class="warning-box">
              <p><strong>‚ö†Ô∏è Warning:</strong> Resetting the application cache will:</p>
              <ul>
                <li>Clear all the app's local storage data</li>
                <li>Clear any unsaved templates, or keybindings (saved files will not be affected)</li>
                <li>Reset the "What's New" notification</li>
              </ul>
              <p><strong>This action cannot be undone!</strong></p>
            </div>
            <button id="reset-cache-btn" class="btn btn-danger">üóëÔ∏è Reset Application Cache</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Binding Modal -->
  <div id="binding-modal" class="binding-modal" style="display: none;">
    <div class="binding-modal-content" style="padding:1rem;">
      <div class="binding-modal-action" id="binding-modal-action">Action Name</div>
      <div class="binding-modal-status" id="binding-modal-status">Press any button, key, mouse button, or move any
        axis...</div>
      <div class="binding-modal-countdown" id="binding-modal-countdown">10</div>
      <div class="binding-modal-controls">
        <label for="activation-mode-select" class="activation-mode-label">
          Activation Mode:
        </label>
        <select id="activation-mode-select" class="activation-mode-select">
          <option value="">Default (Press)</option>
          <option value="press">Press</option>
          <option value="press_quicker">Press (Quicker)</option>
          <option value="delayed_press">Delayed Press</option>
          <option value="delayed_press_medium">Delayed Press (Medium)</option>
          <option value="delayed_press_long">Delayed Press (Long)</option>
          <option value="tap">Tap</option>
          <option value="tap_quicker">Tap (Quicker)</option>
          <option value="double_tap">Double Tap</option>
          <option value="double_tap_nonblocking">Double Tap (Non-blocking)</option>
          <option value="hold">Hold</option>
          <option value="delayed_hold">Delayed Hold</option>
          <option value="delayed_hold_long">Delayed Hold (Long)</option>
          <option value="hold_no_retrigger">Hold (No Retrigger)</option>
          <option value="hold_toggle">Hold Toggle</option>
          <option value="smart_toggle">Smart Toggle</option>
          <option value="all">All</option>
        </select>
      </div>
      <div id="binding-conflict-display" class="binding-conflict-display" style="display: none;"></div>
      <div class="binding-modal-buttons">
        <button id="binding-modal-save-btn" class="btn btn-success">üíæ Save Binding</button>
        <button id="binding-cancel-btn" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Conflict Warning Modal -->
  <div id="conflict-modal" class="modal" style="display: none;">
    <div class="modal-content conflict-modal-content">
      <div class="modal-header">
        <h2>‚ö†Ô∏è Binding Conflict</h2>
      </div>
      <div class="modal-body">
        <p class="conflict-message">This button is already bound to the following actions:</p>
        <div id="conflict-list" class="conflict-list">
          <!-- Conflicts will be listed here -->
        </div>
        <p class="conflict-question">Do you want to keep this binding anyway?</p>
      </div>
      <div class="modal-footer">
        <button id="conflict-cancel-btn" class="btn btn-secondary">Cancel</button>
        <button id="conflict-confirm-btn" class="btn btn-primary">Keep Binding</button>
      </div>
    </div>
  </div>

  <!-- Hidden file input for loading -->
  <input type="file" id="file-input" accept=".xml" style="display: none;" />

  <!-- Joystick Mapping Modal -->
  <div id="joystick-mapping-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Joystick Remapping</h2>
      </div>
      <div class="modal-body">
        <p class="mapping-help">This feature allows you to override device IDs if they are detected incorrectly. If your
          joysticks are working with the correct IDs, you can leave this blank. Click "Detect" for each device type you
          want to remap, then press any button on the physical device.</p>
        <div
          style="background: var(--bg-light); border-left: 3px solid #4ec9b0; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem; font-size: 0.9rem; color: var(--text-secondary);">
          <strong>‚ÑπÔ∏è Note:</strong> Device remapping is optional. Leave sections blank if your current device IDs are
          working correctly.
        </div>

        <div class="stick-mapping-section">
          <div class="stick-section">
            <h3>Right Stick (js1)</h3>
            <div class="stick-info" id="js1-info">
              <div class="not-configured">Not configured</div>
            </div>
            <div style="display: flex; gap: 0.5rem;">
              <button id="detect-js1-btn" class="btn btn-primary" style="flex: 1;">üéÆ Detect js1</button>
              <button id="reset-js1-btn" class="btn btn-secondary" title="Reset to default">‚Üª Reset</button>
            </div>
          </div>

          <div class="stick-section">
            <h3>Left Stick (js2)</h3>
            <div class="stick-info" id="js2-info">
              <div class="not-configured">Not configured</div>
            </div>
            <div style="display: flex; gap: 0.5rem;">
              <button id="detect-js2-btn" class="btn btn-primary" style="flex: 1;">üéÆ Detect js2</button>
              <button id="reset-js2-btn" class="btn btn-secondary" title="Reset to default">‚Üª Reset</button>
            </div>
          </div>

          <div class="stick-section">
            <h3>Gamepad (gp1)</h3>
            <div class="stick-info" id="gp1-info">
              <div class="not-configured">Not configured</div>
            </div>
            <div style="display: flex; gap: 0.5rem;">
              <button id="detect-gp1-btn" class="btn btn-primary" style="flex: 1;">üéÆ Detect gp1</button>
              <button id="reset-gp1-btn" class="btn btn-secondary" title="Reset to default">‚Üª Reset</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="joystick-mapping-save" class="btn btn-success">Save Mapping</button>
        <button id="joystick-mapping-cancel" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Device List Modal (for Input Debugger) -->
  <div id="device-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Connected Devices</h2>
        <button class="modal-close" id="close-modal-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div id="device-modal-list" class="device-list">
          <!-- Device cards will be populated here -->
        </div>
      </div>
      <div class="modal-footer">
        <button id="close-device-modal-footer" class="btn btn-secondary">Close</button>
      </div>
    </div>
  </div>

  <!-- Button Details Modal (for Template Editor) -->
  <div id="button-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Button Details</h2>
      <label>
        Button Name:
        <input type="text" id="button-name-input" placeholder="e.g., Trigger or Hat 1" />
      </label>
      <label>
        Button Type:
        <select id="button-type-select">
          <option value="simple">Simple Button or Axis</option>
          <option value="hat4way">4-Way Hat Switch</option>
        </select>
      </label>

      <!-- Simple button input detection -->
      <div id="simple-input-section">
        <div class="hat-id-box" style="margin-bottom: 0.5rem;">
          <div class="hat-id-label">Detected Input:</div>
          <div id="button-id-display" style="font-size: 1.1rem; font-weight: 500; color: var(--text-primary);">‚Äî</div>
          <div class="hat-id-label" style="margin-top: 0.5rem;">Input ID:</div>
          <code id="button-full-id-display"
            style="font-size: 0.9rem; color: #4ec9b0; background: var(--bg-dark); padding: 0.3rem 0.5rem; border-radius: 3px; display: inline-block;">‚Äî</code>
        </div>
        <div class="hat-button-group">
          <button id="button-modal-detect" class="btn btn-secondary">üéÆ Detect Input</button>
          <button id="button-modal-clear" class="btn btn-secondary">‚úï Clear</button>
        </div>
        <div id="input-detection-status" class="info-text"></div>
      </div>

      <!-- Hat switch input detection -->
      <div id="hat-input-section">
        <div class="hat-id-grid">
          <div class="hat-id-box">
            <div class="hat-id-label">‚¨ÜÔ∏è Up ID:</div>
            <div class="hat-id-display" data-direction="up">‚Äî</div>
          </div>
          <div class="hat-id-box">
            <div class="hat-id-label">‚¨áÔ∏è Down ID:</div>
            <div class="hat-id-display" data-direction="down">‚Äî</div>
          </div>
          <div class="hat-id-box">
            <div class="hat-id-label">‚¨ÖÔ∏è Left ID:</div>
            <div class="hat-id-display" data-direction="left">‚Äî</div>
          </div>
          <div class="hat-id-box">
            <div class="hat-id-label">‚û°Ô∏è Right ID:</div>
            <div class="hat-id-display" data-direction="right">‚Äî</div>
          </div>
        </div>
        <div class="hat-id-box" style="margin-bottom: 1rem;">
          <div class="hat-id-label">‚¨áÔ∏è Push ID:</div>
          <div class="hat-id-display" data-direction="push">‚Äî</div>
        </div>
        <div class="hat-button-container">
          <div class="hat-button-group">
            <button class="btn btn-secondary btn-sm hat-detect-btn" data-direction="up">‚¨ÜÔ∏è Detect Up</button>
            <button class="btn btn-secondary btn-sm hat-clear-btn" data-direction="up">‚úï Clear Up</button>
          </div>
          <div class="hat-button-group">
            <button class="btn btn-secondary btn-sm hat-detect-btn" data-direction="down">‚¨áÔ∏è Detect Down</button>
            <button class="btn btn-secondary btn-sm hat-clear-btn" data-direction="down">‚úï Clear Down</button>
          </div>
          <div class="hat-button-group">
            <button class="btn btn-secondary btn-sm hat-detect-btn" data-direction="left">‚¨ÖÔ∏è Detect Left</button>
            <button class="btn btn-secondary btn-sm hat-clear-btn" data-direction="left">‚úï Clear Left</button>
          </div>
          <div class="hat-button-group">
            <button class="btn btn-secondary btn-sm hat-detect-btn" data-direction="right">‚û°Ô∏è Detect Right</button>
            <button class="btn btn-secondary btn-sm hat-clear-btn" data-direction="right">‚úï Clear Right</button>
          </div>
          <div class="hat-button-group">
            <button class="btn btn-secondary btn-sm hat-detect-btn" data-direction="push">‚¨áÔ∏è Detect Push</button>
            <button class="btn btn-secondary btn-sm hat-clear-btn" data-direction="push">‚úï Clear Push</button>
          </div>
        </div>
        <div id="hat-detection-status" class="info-text">
        </div>
      </div>

      <div class="modal-buttons" style="margin-top: 1.5rem;">
        <button id="button-modal-delete" class="btn btn-danger" style="margin-right: auto;">Delete Button</button>
        <button id="button-modal-cancel" class="btn btn-secondary">Cancel</button>
        <button id="button-modal-save" class="btn btn-success">Save</button>
      </div>
    </div>
  </div>

  <!-- Template Selection Modal (for Visual View) -->
  <div id="template-modal" class="modal" style="display: none;">
    <div class="modal-content wide-modal">
      <h2>Select Joystick Template</h2>
      <div id="template-list" class="template-grid">
        <!-- Templates will be populated here -->
      </div>
      <div class="modal-buttons">
        <button id="template-modal-cancel" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </div>



  <!-- Template Page Modal -->
  <div id="template-page-modal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 610px;">
      <div class="modal-header">
        <h2 id="template-page-modal-title">Add Page</h2>
      </div>
      <div class="modal-body">
        <!-- Basic Info Section -->
        <div class="modal-section">
          <h3 class="section-title">Basic Information</h3>
          <label>
            Page Name:
            <input type="text" id="template-page-name" placeholder="e.g., Left Stick" />
          </label>
        </div>

        <!-- Device Section -->
        <div class="modal-section">
          <h3 class="section-title">Device Configuration</h3>
          <label>
            Device:
            <div class="device-detection-box">
              <div id="detected-device-info" class="detected-device-info">
                <span class="device-icon">üéÆ</span>
                <div class="device-info-text">
                  <span id="detected-device-name" class="device-name">No device detected</span>
                  <span id="detected-device-uuid" class="device-uuid" style="display: none;"></span>
                </div>
              </div>
              <div style="margin-top: 0.75rem;">
                <label style="font-size: 0.9em; color: var(--text-muted); margin-bottom: 0.25rem; display: block;">
                  Select The Device:
                </label>
                <div style="display: flex; gap: 0.5rem; align-items: center; margin-bottom: 0.5rem;">
                  <select id="page-device-select" style="flex: 1;"></select>
                  <button id="refresh-devices-btn" class="btn btn-secondary btn-sm"
                    title="Refresh device list">üîÑ</button>
                </div>
                <hr>
                <label style="font-size: 0.9em; color: var(--text-muted); margin-bottom: 0.25rem; display: block;">
                  Or Auto Detect The Device:
                </label>
              </div>
              <button id="detect-device-btn" class="btn btn-primary">üéØ Press Button on Device</button>
              <div id="device-detection-status" class="info-text" style="margin-top: 0.5rem;">
                Press any button on your joystick or gamepad to identify it.
              </div>
            </div>
          </label>

          <div class="device-detection-box">

            <label>
              Axis Mapping Profile:
              <select id="template-page-axis-profile"></select>
            </label>
            <div class="info-text" id="template-page-axis-summary"></div>

            <div class="custom-axis-actions">
              <button id="open-custom-axis-modal" class="btn btn-secondary btn-sm">Configure Custom Mapping</button>
              <span class="info-text">Use this if your device isn't listed or needs a unique mapping.</span>
            </div>
          </div>

        </div>

        <!-- Image Section -->
        <div class="modal-section">
          <h3 class="section-title">Image Configuration</h3>
          <label>
            Page Image:
            <div style="display: flex; gap: 0.5rem; align-items: center;">
              <button id="page-load-image-btn" class="btn btn-secondary" style="flex: 1;">üì∑ Load Image</button>
              <button id="page-clear-image-btn" class="btn btn-danger btn-sm" style="display: none;">‚úï</button>
            </div>
            <div id="page-image-info" class="info-text" style="margin-top: 0.5rem;"></div>
          </label>

          <label>
            Mirror From Page:
            <select id="page-mirror-select">
              <option value="">No Mirror (Use Own Image)</option>
            </select>
          </label>
          <div class="info-text">
            Select another page to mirror its image horizontally, or use this page's own image.
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="template-page-delete-btn" class="btn btn-danger" style="margin-right: auto; display: none;">Delete
          Page</button>
        <button id="template-page-cancel-btn" class="btn btn-secondary">Cancel</button>
        <button id="template-page-save-btn" class="btn btn-success">Save Page</button>
      </div>
    </div>
  </div>

  <!-- Mirror Template Modal -->
  <div id="mirror-template-modal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 480px;">
      <div class="modal-header">
        <h2>Mirror Button Positions</h2>
      </div>
      <div class="modal-body">
        <div class="info-text" style="margin-bottom: 1rem;">
          Copy button positions from one page to another, mirrored horizontally across the image.
        </div>

        <label>
          Source Page (Copy From):
          <select id="mirror-source-page-select">
            <option value="">-- Select a page --</option>
          </select>
        </label>

        <label>
          Destination Page (Copy To):
          <select id="mirror-dest-page-select">
            <option value="">-- Select a page --</option>
          </select>
        </label>

        <div class="info-text"
          style="margin-top: 1rem; padding: 0.75rem; background: var(--bg-tertiary); border-radius: 4px;">
          ‚ÑπÔ∏è Button positions will be copied and flipped horizontally. The destination page's buttons will be replaced.
        </div>
      </div>
      <div class="modal-footer">
        <button id="mirror-template-cancel-btn" class="btn btn-secondary">Cancel</button>
        <button id="mirror-template-confirm-btn" class="btn btn-success">Mirror Buttons</button>
      </div>
    </div>
  </div>

  <!-- Custom Axis Mapping Modal -->
  <div id="custom-axis-modal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header">
        <h2>Custom Axis Mapping</h2>
      </div>
      <div class="modal-body">
        <div class="axis-detection-controls" style="margin-bottom: 1rem;">
          <button id="start-axis-detection-btn" class="btn btn-primary">üéØ Start Detection</button>
          <button id="stop-axis-detection-btn" class="btn btn-secondary" style="display: none;">‚èπÔ∏è Stop</button>
          <div id="axis-detection-status" class="info-text" style="margin-top: 0.5rem;">
            Click "Start Detection" then move an axis on your device to detect it.
          </div>
        </div>
        <div class="custom-axis-table" id="custom-axis-table"></div>
      </div>
      <div class="modal-footer">
        <button id="custom-axis-reset-btn" class="btn btn-secondary">Reset</button>
        <button id="custom-axis-cancel-btn" class="btn btn-secondary">Cancel</button>
        <button id="custom-axis-save-btn" class="btn btn-success">Save Mapping</button>
      </div>
    </div>
  </div>

  <!-- Custom Confirmation Modal -->
  <div id="confirmation-modal" class="modal" style="display: none;">
    <div class="modal-content confirmation-modal-content">
      <div class="modal-header">
        <h2 id="confirmation-title">Confirm Action</h2>
      </div>
      <div class="modal-body">
        <p id="confirmation-message">Are you sure you want to proceed?</p>
      </div>
      <div class="modal-footer">
        <button id="confirmation-cancel-btn" class="btn btn-secondary">Cancel</button>
        <button id="confirmation-confirm-btn" class="btn btn-primary">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Action Bindings Manager Modal -->
  <div id="action-bindings-modal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 800px;">
      <div class="modal-header">
        <h2 id="action-bindings-title">Manage Bindings</h2>
      </div>
      <div class="modal-body">
        <div id="action-bindings-list" class="action-bindings-list">
          <!-- Bindings will be populated here -->
        </div>
      </div>
      <div class="modal-footer">
        <button id="action-bindings-add-btn" class="btn btn-primary">+ Add New Binding</button>
        <button id="action-bindings-save-btn" class="btn btn-success">üíæ Save Changes</button>
        <button id="action-bindings-cancel-btn" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </div>
  </div>
  </div>

  <!-- Help Modal -->
  <!-- Hidden file inputs -->
  <input type="file" id="image-file-input" accept="image/*" style="display: none;" />
  <input type="file" id="template-file-input" accept=".json" style="display: none;" />
  <input type="file" id="export-keybindings-input" style="display: none;" />

  <!-- What's New Modal -->
  <div id="whats-new-modal" class="modal" style="display: none;">
    <div class="modal-content whats-new-modal-content">
      <div class="modal-header">
        <h2>üéâ What's New in v0.7.1</h2>
      </div>
      <div class="modal-body whats-new-body">
        <div class="whats-new-section">
          <h3>‚ú® New Features</h3>
          <ul>
            <li><strong>Template Editor V2: </strong>A total refactor of the templating system - can now support
              variable numbers of pages, and manual axis definition with presets (more presets will be added later,
              initial presets may be innacurate - so verify your axes!).
            </li>
            <li><strong>Clickable Button IDs:</strong> You can now click on button IDs in the binding info to quickly
              search for them in the main keybindings view.</li>
          </ul>
        </div>
        <div class="whats-new-section">
          <h3>üîß Improvements</h3>
          <ul>
            <li><strong>Template Editor: </strong>Experimenting with page image size normalization for better
              consistency.</li>
            <li><strong>Visual view: </strong>now has better button/text rendering.</li>
          </ul>
        </div>
        <div class="whats-new-section">
          <h3>üß© 0.7.1</h3>
          <ul>
            <li><strong>Template editor:</strong> Removed redundant device binding (as it's per page now).
            <li><strong>Tab Shorcut:</strong> Added tab to lop through pages in template editor and visual view.</li>
            <li><strong>Removing Bind:</strong> Fixed bug where removing a binding would remove ALL bindings of the same
              type.</li>
          </ul>
        </div>
        <div class="whats-new-section">
          <h3>üêõ Bug Fixes</h3>
          <ul>
            <li>Visual view axes no longer map to button types.</li>
            <li>Potential fix for unbound actions.</li>
            <li>Potential fix incorrect axis.</li>
          </ul>
        </div>
        <div class="whats-new-footer">
          <p>Thank you for using the SC Binding Utility Beta!</p>
          <p class="text-muted">Be sure to report any issues on the github <a
              href="https://github.com/BoxximusPrime/SC-Binding-Utility/issues" target="_blank"
              rel="noopener noreferrer">repository</a>.</p>
        </div>
      </div>
      <div class="modal-footer">
        <button id="whats-new-close-btn" class="btn btn-success">Got it!</button>
      </div>
    </div>
  </div>

  <!-- Debug Info Footer -->
  <div id="debug-info"
    style="position: fixed; bottom: 0; right: 0; padding: 5px 10px; background: rgba(0,0,0,0.7); color: #888; font-size: 10px; border-top-left-radius: 4px; z-index: 10000;">
    <span id="debug-log-path" style="cursor: pointer; text-decoration: underline;"
      title="Click to copy log file path">Logs</span>
  </div>
  <img id="hidden-back" src="/src/icons/update_avail.png" hidden>

  <!-- Clear SC Binds Modal -->
  <div id="clear-sc-binds-modal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <h2>üóëÔ∏è Clear Star Citizen Bindings</h2>
      </div>
      <div class="modal-body">
        <div class="warning-box" style="margin-bottom: 1.5rem;">
          <p><strong>‚ö†Ô∏è Warning:</strong> This will create a special unbinding profile that <strong>forcefully unbinds
              ALL selected device inputs</strong> in Star Citizen.</p>
          <p>Use this when you want to start with a completely clean slate in-game.</p>
        </div>

        <h3 style="margin-bottom: 1rem;">Select devices to unbind:</h3>
        <div style="margin-bottom: 1.5rem;">
          <div class="checkbox-container" style="margin-bottom: 0.5rem;">
            <input type="checkbox" id="unbind-keyboard" checked />
            <label for="unbind-keyboard">Keyboard</label>
          </div>
          <div class="checkbox-container" style="margin-bottom: 0.5rem;">
            <input type="checkbox" id="unbind-mouse" checked />
            <label for="unbind-mouse">Mouse</label>
          </div>
          <div class="checkbox-container" style="margin-bottom: 0.5rem;">
            <input type="checkbox" id="unbind-gamepad" checked />
            <label for="unbind-gamepad">Gamepad</label>
          </div>
          <div class="checkbox-container" style="margin-bottom: 0.5rem;">
            <input type="checkbox" id="unbind-joystick1" checked />
            <label for="unbind-joystick1">Joystick 1</label>
          </div>
          <div class="checkbox-container" style="margin-bottom: 0.5rem;">
            <input type="checkbox" id="unbind-joystick2" checked />
            <label for="unbind-joystick2">Joystick 2</label>
          </div>
        </div>

        <div id="clear-binds-status" style="margin-top: 1rem; display: none;"></div>
      </div>
      <div class="modal-footer">
        <button id="clear-binds-cancel-btn" class="btn btn-secondary" onclick="closeClearSCBindsModal()">Cancel</button>
        <button id="clear-binds-generate-btn" class="btn btn-danger">Generate Unbind Profile</button>
      </div>
    </div>
  </div>

  <!-- Clear SC Binds Success Modal -->
  <div id="clear-sc-binds-success-modal" class="modal">
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header">
        <h2>‚úÖ Unbind Profile Created</h2>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 1rem;">The <code>UNBIND_ALL.xml</code> profile has been created successfully!</p>

        <div id="unbind-save-locations" style="margin-bottom: 1.5rem;"></div>

        <div style="background: var(--bg-light); padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
          <h3 style="margin-bottom: 0.5rem;">üìã Console Command:</h3>
          <p style="margin-bottom: 0.5rem;">Load this profile in Star Citizen with:</p>
          <div style="display: flex; gap: 0.5rem; align-items: center;">
            <code id="unbind-console-command"
              style="flex: 1; padding: 0.5rem; background: var(--bg-dark); border-radius: 4px;">pp_RebindKeys UNBIND_ALL</code>
            <button id="copy-unbind-command-btn" class="btn btn-primary" title="Copy to clipboard">üìã Copy</button>
          </div>
        </div>

        <div class="info-box" style="margin-bottom: 1rem;">
          <p><strong>Instructions:</strong></p>
          <ol style="margin: 0.5rem 0 0 1.5rem; padding: 0;">
            <li>Launch Star Citizen</li>
            <li>Press <code>~</code> to open the console</li>
            <li>Paste the command above</li>
            <li>All selected device bindings will be cleared</li>
            <li>Load your custom bindings profile after</li>
          </ol>
        </div>
      </div>
      <div class="modal-footer">
        <button id="remove-unbind-files-btn" class="btn btn-danger">Remove Unbind Files</button>
        <button class="btn btn-primary" onclick="closeClearSCBindsSuccessModal()">Done</button>
      </div>
    </div>
  </div>

</body>

</html>